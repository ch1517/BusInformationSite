(this.webpackJsonpbus_infomation_site=this.webpackJsonpbus_infomation_site||[]).push([[0],{10:function(e){e.exports=JSON.parse('{"station_key":"N%2BQFA%2BwFDx9oMiWdwzjq248QR9Ka1w70Onnmpvdhc1%2FOmwDoLEWlXABOOrTr42J%2F03YjttaCrnwTA4hiJH1OiA%3D%3D","vworld_key":"B68996E4-BC0C-3C4A-B658-93658DD96E73"}')},15:function(e,t,n){},28:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),o=(n(28),n(4)),s=(n(15),n(51)),i=n(52),l=n(56),j=n(53),d=n(54),u=n(55),b=(n(29),n(12)),O=n.n(b),h=n(5),m=n.n(h),p=n(10);var v=function(e){return Object.keys(e).map((function(t){e[t]=e[t]._text})),e},f=n(1),x=p.station_key;function g(e){var t=Object(r.useState)(16),n=Object(o.a)(t,2),a=n[0],c=n[1],i=Object(s.a)(),l=Object(s.b)({zoomend:function(){c(l.getZoom())},moveend:function(){console.log(a),a>13&&function(e,t){var n=t.lat,r=t.lng,a="/api/BusSttnInfoInqireService/getCrdntPrxmtSttnList?serviceKey="+x+"&gpsLati="+n+"&gpsLong="+r;O.a.get(a).then((function(t){var n=t.request.response;if("00"==(n=JSON.parse(n).response).header.resultCode._text){var r=n.body.items.item;null==r?e.setStation([]):Array.isArray(r)?(r.forEach((function(e){e=v(e)})),e.setStation(r)):(r=v(r),e.setStation([r]))}else console.log(n.header.resultCode)})).catch((function(e){console.log(e)}))}(e,i.getCenter())},dragend:function(){}});return a<14?Object(f.jsx)("div",{className:"alert-box",children:Object(f.jsx)("h4",{children:"\uc870\uae08 \ub354 \uac00\uae4c\uc774 \uc774\ub3d9\ud574\uc8fc\uc138\uc694"})}):Object(f.jsx)("div",{})}var y=function(e){var t=Object(r.useState)([37.50937295468167,127.0461450277878]),n=Object(o.a)(t,2),a=n[0],c=(n[1],m.a.icon({iconUrl:"/marker.png",iconRetinaUrl:"/marker.png",iconAnchor:[15,15],popupAnchor:[0,0],iconSize:[30,30]})),s="https://api.vworld.kr/req/wmts/1.0.0/"+p.vworld_key+"/Base/{z}/{y}/{x}.png";return Object(f.jsx)("div",{className:"map-container",children:Object(f.jsxs)(i.a,{center:a,zoom:16,scrollWheelZoom:!0,children:[Object(f.jsx)(l.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:s}),Object(f.jsx)(g,{zoomLevel:e.zoomLevel,setStation:e.setStation}),e.station.length>0&&e.station.map((function(t){var n=t.gpslati,r=t.gpslong,a=t.nodenm;return Object(f.jsxs)(j.a,{position:[n+"",r+""],icon:c,children:[Object(f.jsx)(d.a,{children:Object(f.jsx)("span",{children:e.nodeid})}),Object(f.jsx)(u.a,{direction:"bottom",opacity:1,permanent:!0,children:Object(f.jsx)("span",{children:a})})]})}))]})})};var S=function(e){return Object(f.jsx)("div",{className:"infomation-container",children:Object(f.jsx)("div",{className:"infomation-table",children:e.station.length>0&&e.station.map((function(t){var n=t.nodenm,r=t.nodeid,a=t.citycode;return Object(f.jsxs)("div",{onClick:function(){return e.openModal(n,r,a)},children:[Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("img",{src:"/marker.png"}),Object(f.jsxs)("h5",{children:[n,"(",r,")"]})]}),Object(f.jsx)("hr",{})]})}))})})};var N=function(){return Object(f.jsx)("header",{className:"App-header",children:Object(f.jsx)("div",{className:"logo",children:"Bus Information"})})};function k(e){return e.array.map((function(e){e.routeno;var t=e.arrprevstationcnt,n=e.arrtime,r=parseInt(parseInt(n)/60);return Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:r<2?"\uc7a0\uc2dc\ud6c4 \ub3c4\ucc29":"".concat(r,"\ubd84 \ud6c4")}),Object(f.jsxs)("span",{children:[t," \uc815\uac70\uc7a5 \uc804"]})]})}))}var A=function(e){var t=e.isOpen,n=e.close;return Object(f.jsx)(f.Fragment,{children:t?Object(f.jsx)("div",{className:"modal-container ",children:Object(f.jsxs)("div",{className:"modal",children:[Object(f.jsx)("button",{onClick:n,children:"X"}),Object(f.jsxs)("div",{className:"info-content",children:[Object(f.jsx)("h3",{className:"station-name",children:e.nodenm}),Object(f.jsx)("div",{className:"arrival-info-container",children:Object.keys(e.arravalInfo).length>0&&Object.keys(e.arravalInfo).map((function(t,n){return Object(f.jsxs)("div",{className:"arrival-bus-info",children:[Object(f.jsxs)("span",{className:"route-number",children:[e.arravalInfo[t][0].routeno,"\ubc88"]}),Object(f.jsx)("span",{className:"arrival-bus-container",children:Object(f.jsx)(k,{array:e.arravalInfo[t]})})]})}))})]})]})}):null})};var C=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(o.a)(s,2),l=i[0],j=i[1],d=Object(r.useState)(null),u=Object(o.a)(d,2),b=u[0],h=u[1],m=Object(r.useState)({}),x=Object(o.a)(m,2),g=x[0],k=x[1],C=function(e,t){var n="/api/ArvlInfoInqireService/getSttnAcctoArvlPrearngeInfoList"+("?serviceKey="+p.station_key+"&cityCode="+e+"&nodeId="+t);O.a.get(n).then((function(e){var t=e.request.response;if("00"==(t=JSON.parse(t).response).header.resultCode._text){var n=t.body.items,r={};null!=n.item&&(0!=(n=n.item).length&&Array.isArray(n)?(n.forEach((function(e){e=v(e)})),n.map((function(e){var t=e.routeno,n=e.routeid,a=e.arrtime,c=e.arrprevstationcnt,o={};o.routeno=t,o.arrtime=a,o.arrprevstationcnt=c,null==r[n]&&(r[n]=[]),r[n].push(o)})),console.log(r)):console.log(n)),k(r),j(!0)}else console.log(t.header.resultCode)})).catch((function(e){console.log(e)}))};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(N,{}),Object(f.jsxs)("div",{className:"contents",children:[Object(f.jsx)(y,{station:a,setStation:c}),Object(f.jsx)(S,{station:a,openModal:function(e,t,n){C(n,t),h(e)}}),Object(f.jsx)(A,{isOpen:l,close:function(){return j(!1)},nodenm:b,arravalInfo:g})]})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};c.a.render(Object(f.jsx)(C,{}),document.getElementById("root")),I()}},[[49,1,2]]]);
//# sourceMappingURL=main.bdc9cb6a.chunk.js.map