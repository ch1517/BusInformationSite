{"version":3,"sources":["apiRequest.tsx","modules/map/state.tsx","modules/map/index.tsx","static/images/bus.tsx","modules/information/state.tsx","modules/information/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["apiRequest","url","axios","get","process","then","response","catch","err","serviceKey","apiKey","station_key","MapEvent","position","setMap","setPosition","setApiState","setZoomLevel","setZoomState","map","useMap","useEffect","navigator","geolocation","getCurrentPosition","_position","coords","latitude","longitude","setView","getZoom","mapEvents","useMapEvents","zoomstart","zoomend","moveend","mapInfo","center","getCenter","southWest","getBounds","getSouthWest","northEast","getNorthEast","dragend","CustomTooltip","selectID","nodeid","nodenm","Tooltip","direction","opacity","permanent","interactive","className","alt","src","Map","zoomLevel","station","apiState","setStation","setSelectID","settingBusStop","vworld_url","vworld_key","useState","zoomState","stations","checkLatLngOut","item","_southWest","_northEast","lat","lng","nodeidFiltering","result","forEach","name","includes","fetcher","args","a","undefined","header","data","body","resultCode","items","newData","Array","isArray","push","console","log","useSWR","stationsState","error","stationsMutate","mutate","useStations","mapIcon","leaflet","icon","iconUrl","iconRetinaUrl","iconAnchor","popupAnchor","iconSize","MapContainer","zoom","scrollWheelZoom","TileLayer","maxZoom","maxNativeZoom","attribution","length","index","citycode","gpslati","gpslong","Marker","toString","eventHandlers","click","tooltipClick","BusSVG","props","version","xmlns","width","height","viewBox","preserveAspectRatio","transform","fill","stroke","d","getRouteInfoIem","routeid","parameter","Information","mapMode","selectBusStop","setMapMode","refreshTime","setRefreshTime","selectRoute","setSelectRoute","getBusArravalInfoFetcher","newArr","Promise","all","routeno","arrtime","arrprevstationcnt","newInfo","routeInfo","sort","x","y","refreshInterval","arravalInfo","arravalInfoState","isError","arravalInfoMutate","useArravalInfo","getBusInfoByRouteIdFecher","nodeData","param","busStopList","routeInfoState","useRouteInfo","getRouteAcctoBusLcListFetcher","arravalInRoute","arravalInRouteState","arravalInRouteMutate","useArravalInRoute","getBusColor","routetp","busColor","date","Date","getHours","padStart","getMinutes","refreshTimeSave","convertVehicleTime","time","substr","onClick","Math","floor","startnodenm","endnodenm","BusArravalInfo","arravalList","startTime","startvehicletime","endTime","endvehicletime","arravalInRoutetmp","nodeord","intervaltime","intervalsattime","intervalsuntime","style","borderColor","Object","keys","color","vehicleno","slice","nodeno","InfoComponent","App","setSelectBusStop","_citycode","_gpslati","_gpslong","_nodeid","_nodenm","busStop","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cd08205d.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const apiRequest = (url: string) => {\n  return axios.get(`${process.env.REACT_APP_API_URL}${url}`)\n    .then(response => {\n      return response;\n    })\n    .catch(err => {\n      return err;\n    })\n}","import { apiRequest } from '../../apiRequest';\nimport { LatLng } from 'leaflet';\nimport useSWR from 'swr';\nimport apiKey from '../../private/apiKey.json';\nimport { MapInfoInterface } from './interface';\n\nconst serviceKey = apiKey.station_key; // 버스정류장 정보조회 Key\nexport const useStations = (position: [number, number], map: MapInfoInterface | null, apiState: boolean) => {\n  // 화면의 latlng 내에 있는지 체크\n  const checkLatLngOut = (item: any, _southWest: LatLng, _northEast: LatLng) => {\n    if (item[\"lat\"] < _southWest.lat || item[\"lat\"] > _northEast.lat\n      || item[\"lng\"] < _southWest.lng || item[\"lng\"] > _northEast.lng)\n      return false;\n    return true;\n  }\n  /**\n   * 정류장 정보가 두 개씩 나오는 경우 하나 필터링\n   * @param nodeid \n   * @returns \n   */\n  const nodeidFiltering = (nodeid: string) => {\n    const ignoreList = ['GHB', 'GOB'];\n    let result = true;\n    ignoreList.forEach(name => {\n      if (nodeid.includes(name)) {\n        result = false;\n        return;\n      }\n    })\n    return result;\n  }\n  const fetcher = async (url: string, args: string) => {\n    const southWest = map!.southWest;\n    const northEast = map!.northEast;\n    if (southWest !== undefined && northEast !== undefined) {\n      try {\n        const response = await apiRequest(`${url}?serviceKey=${serviceKey}&${args}`);\n        let header = response.data.response.header;\n        let data = response.data.response.body;\n        if (header.resultCode === \"00\" || header.resultCode === 0) {\n          // api 조회 정상적으로 완료 했을 때 \n          let items = data.items.item;\n          let newData: any[] = [];\n          if (items == null || items === undefined) {\n            newData = [];\n          } else if (Array.isArray(items)) {\n            items.forEach((item) => {\n              if (checkLatLngOut(item, southWest, northEast) && nodeidFiltering(item.nodeid)) {\n                newData.push(item);\n              }\n            });\n          } else {\n            if (!checkLatLngOut(items, southWest, northEast)) {\n              newData = [items];\n            } else {\n              newData = [];\n            }\n          }\n          return newData;\n        } else {\n          console.log(data);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  };\n  const { data, error, mutate } = useSWR(apiState ? ['/BusSttnInfoInqireService/getCrdntPrxmtSttnList', `gpsLati=${position[0]}&gpsLong=${position[1]}`] : null, fetcher);\n\n  return {\n    stations: data,\n    stationsState: !error && !data,\n    stationsMutate: mutate\n  }\n}\n","import React from 'react';\nimport { MapContainer, TileLayer, Marker, useMap, useMapEvents, Tooltip } from 'react-leaflet';\nimport { useState, useEffect } from \"react\";\nimport 'leaflet/dist/leaflet.css';\nimport leaflet from 'leaflet';\nimport { MapInfoInterface, MapInterface } from './interface';\nimport { useStations } from './state';\nimport apiKey from '../../private/apiKey.json';\nimport './style.scss';\n\ninterface MapEventProps {\n  position: [number, number];\n  setMap: (map: MapInfoInterface) => void;\n  setPosition: (position: [number, number]) => void;\n  setApiState: (apiState: boolean) => void;\n  setZoomLevel: (zoomLevel: number) => void;\n  setZoomState: (zoomState: boolean) => void;\n}\n\nconst MapEvent: React.FC<MapEventProps> = ({ position, setMap, setPosition, setApiState, setZoomLevel, setZoomState }) => {\n  const map = useMap();\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition((_position) => {\n      setPosition([_position.coords.latitude, _position.coords.longitude]);\n    });\n  }, []);\n\n  useEffect(() => {\n    map.setView(position, map.getZoom());\n  }, [position]);\n\n  const mapEvents = useMapEvents({\n    zoomstart: () => {\n      setApiState(false);\n      setZoomState(false);\n    },\n    // 지도 zoom 종료\n    zoomend: () => {\n      setZoomLevel(mapEvents.getZoom()); // 현재 지도의 center lat, lng 가져오기\n      setApiState(true);\n      setZoomState(true);\n    },\n    // 지도 움직임 종료\n    moveend: () => {\n      let mapInfo: MapInfoInterface = {};\n      mapInfo.center = map.getCenter();\n      mapInfo.southWest = map.getBounds().getSouthWest();\n      mapInfo.northEast = map.getBounds().getNorthEast();\n      setMap(mapInfo);\n      // costomEvent(mapEvents.getZoom());\n    },\n    // 스크롤로 이동할 때 false\n    dragend: () => {\n      setApiState(true);\n      setZoomState(true);\n    }\n  });\n  return <></>\n}\ninterface CustomTooltipProps {\n  selectID: string;\n  nodeid: string;\n  nodenm: string;\n}\nconst CustomTooltip: React.FC<CustomTooltipProps> = ({ selectID, nodeid, nodenm }) => {\n  return (\n    <Tooltip direction=\"top\" opacity={1} permanent interactive>\n      <div className={selectID === nodeid ? \"select\" : \"\"}>\n        <div><img alt=\"\" className=\"busIcon\" src={process.env.PUBLIC_URL + selectID === nodeid ? '/marker.png' : '/marker_white.png'} /></div>\n        <div>\n          <span>{nodenm}</span>\n          <span>{nodeid}</span>\n        </div>\n      </div>\n    </Tooltip>\n  )\n}\nconst Map: React.FC<MapInterface> = ({ position, zoomLevel, station, selectID, apiState, setPosition, setZoomLevel, setStation, setSelectID, settingBusStop, setApiState }) => {\n  const BASE_ZOOM_LEVEL = 17;\n  const vworld_url = `https://api.vworld.kr/req/wmts/1.0.0/${apiKey.vworld_key}/Base/{z}/{y}/{x}.png`;\n\n  const [zoomState, setZoomState] = useState(true);\n  const [map, setMap] = useState<MapInfoInterface | null>(null);\n  const { stations } = useStations(position, map, apiState);\n\n  useEffect(() => {\n    if (typeof stations !== 'undefined')\n      setStation(stations);\n  }, [stations]);\n\n  useEffect(() => {\n    if (map !== null && zoomLevel >= BASE_ZOOM_LEVEL && apiState)\n      setPosition([map.center![\"lat\"], map.center![\"lng\"]]);\n  }, [map]);\n\n  let mapIcon = leaflet.icon({\n    iconUrl: process.env.PUBLIC_URL + '/marker.png',\n    iconRetinaUrl: process.env.PUBLIC_URL + '/marker.png',\n    iconAnchor: [15, 15],\n    popupAnchor: [0, 0],\n    iconSize: [30, 30],\n  });\n\n  let tooltipClick = (citycode: number, gpslati: number, gpslong: number, nodenm: string, nodeid: string) => {\n    setSelectID(nodeid);\n    settingBusStop(citycode, gpslati, gpslong, nodeid, nodenm);\n  }\n\n  return (\n    <div className=\"map-container\">\n      {zoomLevel < BASE_ZOOM_LEVEL ? <div className=\"alert-box\"><h5>조금 더 가까이 이동해주세요</h5></div> : <div></div>}\n      <MapContainer center={position} zoom={zoomLevel} scrollWheelZoom={true}>\n        <TileLayer maxZoom={22} maxNativeZoom={18}\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n          url={vworld_url}\n        />\n        <MapEvent setApiState={setApiState}\n          position={position} setPosition={setPosition} setMap={setMap}\n          setZoomLevel={setZoomLevel} setZoomState={setZoomState} />\n        {/* zoom 중인 경우 marker 표시를 안하기 위해서 apiState 추가 */}\n        {zoomState\n          && zoomLevel >= BASE_ZOOM_LEVEL\n          && station.length > 0 &&\n          station.map(({ citycode, gpslati, gpslong, nodeid, nodenm }, index) => {\n            return (\n              <Marker position={[gpslati.toString(), gpslong.toString()]} icon={mapIcon} key={index}\n                eventHandlers={{ click: () => tooltipClick(citycode, gpslati, gpslong, nodenm, nodeid) }}\n              >\n                <CustomTooltip nodenm={nodenm} nodeid={nodeid} selectID={selectID} />\n              </Marker>\n            )\n          })}\n      </MapContainer>\n    </div >\n  )\n}\n\n\nexport default Map;\n","export const BusSVG = (props: any) => {\n    return (\n        <svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"512.000000pt\" height=\"512.000000pt\" viewBox=\"0 0 512.000000 512.000000\"\n            preserveAspectRatio=\"xMidYMid meet\">\n\n            <g transform=\"translate(0.000000,512.000000) scale(0.100000,-0.100000)\"\n                fill={props.fill} stroke=\"none\">\n                <path d=\"M838 5104 c-169 -40 -318 -174 -381 -341 -21 -57 -22 -71 -27 -602\n   l-5 -544 -41 -12 c-117 -35 -253 -142 -312 -248 -60 -106 -67 -143 -67 -357 0\n   -189 1 -197 26 -251 57 -121 154 -180 307 -187 l92 -4 0 -837 c0 -921 -2 -894\n   62 -1013 60 -113 194 -223 316 -259 l42 -12 0 -57 c0 -170 69 -296 194 -352\n   50 -22 59 -23 341 -23 l290 0 56 26 c121 57 180 154 187 307 l4 92 638 0 638\n   0 4 -93 c7 -152 66 -249 187 -306 l56 -26 290 0 c282 0 291 1 341 23 125 56\n   194 182 194 352 l0 57 43 12 c121 36 255 146 315 259 64 119 62 92 62 1013 l0\n   837 93 4 c152 7 249 66 306 187 25 54 26 62 26 251 0 214 -7 251 -67 357 -59\n   106 -195 213 -312 248 l-41 12 -5 544 c-5 531 -6 545 -27 602 -64 169 -213\n   301 -385 342 -91 21 -3352 21 -3440 -1z m3032 -443 c61 -32 117 -86 148 -146\n   23 -43 27 -62 27 -140 0 -106 -20 -158 -88 -225 -51 -52 -96 -75 -172 -89 -82\n   -15 -2368 -15 -2450 0 -76 14 -121 37 -172 89 -68 67 -88 119 -88 225 0 75 4\n   98 24 135 42 81 117 145 201 171 14 4 588 7 1275 6 l1250 -2 45 -24z m206\n   -849 c58 -27 123 -89 153 -148 39 -76 42 -131 39 -717 l-3 -562 -33 -67 c-37\n   -76 -82 -120 -162 -157 l-55 -26 -1455 0 -1455 0 -67 33 c-76 37 -120 82 -157\n   162 l-26 55 -3 562 c-3 586 0 642 39 717 25 50 83 112 124 134 80 42 44 41\n   1560 39 l1450 -2 51 -23z m-2561 -2137 c135 -59 210 -200 183 -345 -13 -71\n   -37 -116 -88 -167 -67 -68 -119 -88 -225 -88 -75 0 -98 4 -135 24 -61 32 -116\n   86 -148 146 -23 43 -27 62 -27 140 0 106 20 158 88 225 50 51 86 70 157 86 69\n   15 130 8 195 -21z m2270 24 c76 -14 121 -37 172 -89 68 -67 88 -119 88 -225 0\n   -78 -4 -97 -27 -140 -32 -60 -87 -114 -148 -146 -65 -34 -204 -34 -272 -1 -55\n   27 -122 91 -148 142 -96 188 22 425 229 460 25 4 46 8 47 9 0 0 27 -4 59 -10z\"/>\n            </g>\n        </svg>\n    )\n}\n\n","import apiKey from '../../private/apiKey.json';\nimport { apiRequest } from '../../apiRequest';\nimport useSWR from 'swr';\nimport { BusStopInterface, RouteInformation } from './interface';\nconst serviceKey = apiKey.station_key; // 버스정류장 정보조회 Key\n\n/**\n * 노선의 기본정보(종점, 출발점, 버스종류)를 반환하는 API 호출\n * @param routeno \n * @param routeid \n * @returns \n */\nconst getRouteInfoIem = async (citycode: number, routeid: string) => {\n    const parameter = `?serviceKey=${serviceKey}&cityCode=${citycode}&routeId=${routeid}`;\n    const url = `/BusRouteInfoInqireService/getRouteInfoIem${parameter}`;\n    try {\n        const response = await apiRequest(url);\n        let header = response.data.response.header;\n        let data = response.data.response.body;\n        // api 조회 정상적으로 완료 했을 때 \n        if (header.resultCode === \"00\" || header.resultCode === 0) {\n            let item = data.items.item;\n            return item;\n        }\n        return header.resultCode;\n    } catch (e) {\n        console.log(e);\n        return -1;\n    }\n}\nexport const useArravalInfo = (selectBusStop: BusStopInterface | null, mapMode: number) => {\n    const getBusArravalInfoFetcher = async (url: string, args: string) => {\n        try {\n            const response = await apiRequest(`${url}?serviceKey=${serviceKey}&${args}`);\n            let header = response.data.response.header;\n            let data = response.data.response.body;\n            // api 조회 정상적으로 완료 했을 때 \n            if (header.resultCode === \"00\" || header.resultCode === 0) {\n                var items = data.items;\n                var newArr: any = [];\n                if (items['item'] != null) {\n                    items = items.item;\n                    // 배열이며, 길이가 0이 아닐 때\n                    if (items.length !== 0 && Array.isArray(items)) {\n                        newArr = await Promise.all(items.map(async ({ routeno, routeid, arrtime, arrprevstationcnt }) => {\n                            var newInfo: RouteInformation = {};\n                            newInfo['routeid'] = routeid;\n                            newInfo['routeno'] = routeno;\n                            newInfo['arrtime'] = arrtime;\n                            newInfo['arrprevstationcnt'] = arrprevstationcnt;\n                            let routeInfo = await getRouteInfoIem(selectBusStop!.citycode, routeid);\n                            newInfo['routeInfo'] = routeInfo;\n                            return newInfo;\n                        }))\n                    } else if (typeof (items) === 'object') {\n                        let newInfo: RouteInformation = {};\n                        newInfo['routeid'] = items['routeid'];\n                        newInfo['routeno'] = items['routeno'];\n                        newInfo['arrtime'] = items['arrtime'];\n                        newInfo['arrprevstationcnt'] = items['arrprevstationcnt'];\n                        let routeInfo = await getRouteInfoIem(selectBusStop!.citycode, items['routeid']);\n                        newInfo['routeInfo'] = routeInfo;\n                        newArr.push(newInfo);\n                    } else {\n                        console.log(items);\n                    }\n                }\n                // 도착 시간 순으로 정렬\n                newArr.sort((x: RouteInformation, y: RouteInformation) => x.arrtime! - y.arrtime!);\n                return newArr;\n            } else {\n                console.log(data.header.resultCode)\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\n    const { data, error, mutate } = useSWR(\n        selectBusStop !== null && mapMode === 1 ? ['/ArvlInfoInqireService/getSttnAcctoArvlPrearngeInfoList',\n            `&cityCode=${selectBusStop!.citycode}&nodeId=${selectBusStop!.nodeid}`] : null, getBusArravalInfoFetcher, { refreshInterval: 60000 });\n\n    return {\n        arravalInfo: data,\n        arravalInfoState: !error && !data,\n        isError: error,\n        arravalInfoMutate: mutate\n    }\n}\nexport const useRouteInfo = (selectBusStop: BusStopInterface | null, mapMode: number, selectRoute: RouteInformation | null) => {\n    //노선별로 버스의 GPS 위치정보의 목록을 조회 \n    const getBusInfoByRouteIdFecher = async (url: string, nodeData: RouteInformation) => {\n        const param = `cityCode=${selectBusStop?.citycode}&routeId=${nodeData.routeid}&numOfRows=500`;\n        try {\n            const response = await apiRequest(`${url}?serviceKey=${serviceKey}&${param}`);\n            let header = response.data.response.header;\n            let data = response.data.response.body;\n            // api 조회 정상적으로 완료 했을 때 \n            if (header.resultCode === \"00\" || header.resultCode === 0) {\n                let item = data.items?.item;\n                if (nodeData.routeInfo)\n                    nodeData.routeInfo.busStopList = item ? item : [];\n                else\n                    nodeData.routeInfo = undefined;\n                return nodeData;\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    // route information\n    const { data, error } = useSWR(\n        selectBusStop !== null && selectRoute !== null && mapMode === 2 ?\n            ['/BusRouteInfoInqireService/getRouteAcctoThrghSttnList', selectRoute] : null, getBusInfoByRouteIdFecher)\n\n    return {\n        routeInfo: data,\n        routeInfoState: !error && !data,\n        isError: error\n    }\n}\nexport const useArravalInRoute = (selectBusStop: BusStopInterface | null, mapMode: number, selectRoute: RouteInformation | null) => {\n    /**\n      * 노선별로 버스의 GPS 위치정보의 목록을 조회\n      */\n    const getRouteAcctoBusLcListFetcher = async (url: string, nodeData: RouteInformation) => {\n        const param = `cityCode=${selectBusStop!.citycode}&routeId=${nodeData.routeid}`;\n        try {\n            const response = await apiRequest(`${url}?serviceKey=${serviceKey}&${param}`);\n            let header = response.data.response.header;\n            let data = response.data.response.body;\n            // api 조회 정상적으로 완료 했을 때 \n            if (header.resultCode === \"00\" || header.resultCode === 0) {\n                let item = data.items.item;\n                return item;\n            }\n        } catch (e) {\n            console.log(e);\n        }\n\n    }\n    const { data, error, mutate } = useSWR(\n        selectBusStop !== null && selectRoute !== null && mapMode === 2 ?\n            ['/BusLcInfoInqireService/getRouteAcctoBusLcList', selectRoute] : null, getRouteAcctoBusLcListFetcher, { refreshInterval: 60000 })\n\n    return {\n        arravalInRoute: data,\n        arravalInRouteState: !error && !data,\n        arravalInRouteMutate: mutate\n    }\n}\n","\nimport React, { useEffect, useState } from 'react';\nimport RotateLoader from \"react-spinners/RotateLoader\";\nimport './style.scss';\nimport { BusSVG } from '../../static/images/bus';\nimport { BusStopInterface, InformationProps, RouteInformation } from './interface';\nimport { useArravalInfo, useArravalInRoute, useRouteInfo } from './state';\n\nconst Information: React.FC<InformationProps> = ({ mapMode, station, selectBusStop, settingBusStop, setMapMode }) => {\n  const [refreshTime, setRefreshTime] = useState<string | null>(null);\n  const [selectRoute, setSelectRoute] = useState<RouteInformation | null>(null);\n  const { arravalInfo, arravalInfoState, arravalInfoMutate } = useArravalInfo(selectBusStop, mapMode);\n  const { routeInfo, routeInfoState } = useRouteInfo(selectBusStop, mapMode, selectRoute);\n  const { arravalInRoute, arravalInRouteState, arravalInRouteMutate } = useArravalInRoute(selectBusStop, mapMode, selectRoute);\n\n  /**\n   * 버스 노선 종류에 따른 색 반환\n   * @param routetp 노선 종류\n   * @returns \n   */\n  const getBusColor = (routetp: string) => {\n    let busColor: string = '#146ACC';\n    switch (routetp) {\n      case \"간선버스\":\n        busColor = \"#008039\";\n        break;\n      case \"좌석버스\":\n      case \"급행버스\":\n      case \"광역버스\":\n        busColor = \"#CC1100\";\n        break;\n      default:\n        break;\n    }\n    return busColor;\n  }\n\n  const BusArravalInfo = (data: any, index: number) => {\n    const time = Math.floor(data.arrtime! / 60);\n    let busColor: string = getBusColor(data?.routeInfo?.routetp);\n    return (\n      <div key={index} onClick={() => {\n        setMapMode(2);\n        setSelectRoute(data);\n        // 도착 정보 다시 가져오는 API 호출\n        arravalInRouteMutate();\n      }}>\n        <BusSVG fill={busColor} />\n        <div className=\"info-div\">\n          <div className=\"route-info\">\n            <div className=\"route-number\">\n              {data.routeno}\n            </div>\n            {data.routeInfo && typeof data.routeInfo !== \"number\" &&\n              <div className=\"route-start-end\">\n                {`${data.routeInfo.startnodenm}↔${data.routeInfo.endnodenm}`}\n              </div>\n            }\n          </div>\n          {/* <div>{data.routeInfo.routetp}</div> */}\n          <div className=\"arraval-info\">\n            <span>{time < 3 ? (\"잠시 후 도착\") : (`${time}분`)}</span>\n            <span>{data.arrprevstationcnt}정류장</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const refreshTimeSave = () => {\n    const date = new Date();\n    setRefreshTime(`${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`);\n  }\n\n  useEffect(() => {\n    // X 눌러서 다시 bus stop list로 돌아올 때 arravalInfo 초기화\n    if (mapMode === 0 && typeof arravalInRoute !== \"undefined\" && arravalInfo.length > 0) {\n      arravalInfoMutate([]);\n    }\n  }, [mapMode]);\n\n  useEffect(() => {\n    refreshTimeSave();\n  }, [arravalInfo, arravalInRoute]);\n\n  const convertVehicleTime = (time: string | number) => {\n    if (!time) return '';\n    let result = typeof time === \"number\" ? time.toString().padStart(4, '0') : time;\n    result = `${result.substr(0, 2)}:${result.substr(2)}`\n    return result;\n  }\n  const InfoComponent = () => {\n    switch (mapMode) {\n      // BusStopList\n      case 0:\n        return (\n          <div className=\"information-table\">\n            <div className=\"bus-stop-list\">\n              {/* Map mode false인 경우 버스 노선 그리기  */}\n              {station.length > 0 &&\n                station.map(({ citycode, gpslati, gpslong, nodenm, nodeid }: BusStopInterface, index) => {\n                  return (\n                    <div key={index} onClick={() => settingBusStop(citycode, gpslati, gpslong, nodeid, nodenm)}>\n                      <div className='info'>\n                        <img src={process.env.PUBLIC_URL + '/marker.png'} alt=\"\" />\n                        <h5>{nodenm}({nodeid})</h5>\n                      </div>\n                    </div>\n                  )\n                })\n              }\n            </div>\n          </div>\n        )\n      // BusStopInformation\n      case 1:\n        return (\n          <>\n            <div className=\"bus-stop-container\">\n              <div className=\"bus-stop-name\">{selectBusStop!.nodenm}</div>\n              <div className=\"bus-stop-information\">\n                <div className=\"refresh-time\">\n                  {refreshTime} 기준\n                  <button\n                    onClick={() => {\n                      arravalInfoMutate();\n                    }\n                    }><i className=\"fas fa-sync-alt\"></i>\n                  </button>\n                </div>\n              </div>\n            </div>\n            {arravalInfoState ?\n              <div className=\"loading\"><RotateLoader /> </div>\n              :\n              <div className=\"bus-arraval-list\">\n                {arravalInfo.length > 0 ?\n                  arravalInfo.map((data: any, index: number) => {\n                    return BusArravalInfo(data, index);\n                  })\n                  :\n                  <span>도착 예정 정보 없음</span>\n                }\n              </div >\n            }\n          </>\n        )\n      case 2:\n        if (routeInfoState) return <div className=\"loading\"><RotateLoader /> </div>;\n        let startTime = convertVehicleTime(routeInfo?.routeInfo?.startvehicletime);\n        let endTime = convertVehicleTime(routeInfo?.routeInfo?.endvehicletime);\n        let arravalList: any;\n        if (arravalInRouteState) arravalList = [];\n        else {\n          arravalList = {};\n          let arravalInRoutetmp = arravalInRoute;\n          // 만약 arravalInRoute가 array가 아닌 object라면\n          if (arravalInRoute && !Array.isArray(arravalInRoute))\n            arravalInRoutetmp = [arravalInRoute];\n          arravalInRoutetmp?.forEach((data: any) => arravalList[data.nodeord] = data);\n        }\n        let busColor: string = getBusColor(routeInfo?.routeInfo?.routetp);\n        return (\n          <div className=\"route-container\">\n            <div className=\"bus-stop-container\">\n              <div className=\"bus-stop-name\">\n                <BusSVG fill={busColor} />\n                {routeInfo!.routeno}\n              </div>\n              {routeInfo?.routeInfo &&\n                <div className=\"route-info-container\">\n                  <div className=\"route-info-item\">\n                    <div className=\"title\">노선유형</div>\n                    <div className=\"information\">{routeInfo?.routeInfo?.routetp}</div>\n                  </div>\n                  <div className=\"route-info-item\">\n                    <div className=\"title\">운행시간</div>\n                    <div className=\"information\">첫차 {startTime}, 막차 {endTime}</div>\n                  </div>\n                  <div className=\"route-info-item\">\n                    <div className=\"title\">배차간격</div>\n                    <div className=\"information\">평일 {routeInfo?.routeInfo?.intervaltime ?? ''}분, 토요일 {routeInfo?.routeInfo?.intervalsattime ?? ''}분, 일요일 {routeInfo?.routeInfo?.intervalsuntime ?? ''}분</div>\n                  </div>\n                </div>\n              }\n              <div className=\"bus-stop-information\">\n                <div className=\"refresh-time\">\n                  {refreshTime} 기준\n                  <button\n                    onClick={() => arravalInRouteMutate()}><i className=\"fas fa-sync-alt\"></i>\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div className=\"route-list\">\n              {routeInfo!.routeInfo?.busStopList.map((data: any, index: number) => {\n                return (\n                  <div className=\"route-item\" key={index}>\n                    <div className=\"route-line\" style={{ borderColor: busColor }}>\n                      {Object.keys(arravalList).includes(data.nodeord.toString()) ?\n                        <>\n                          <div className='bus-logo' style={{ borderColor: busColor }}><BusSVG fill={busColor} /></div>\n                          <div className='bus-number' style={{ color: busColor, borderColor: busColor }}>{arravalList[data.nodeord.toString()].vehicleno.slice(-7)}</div>\n                        </>\n                        : <></>\n                      }\n                    </div>\n                    <div className=\"bus-stop-text\">\n                      <div className=\"node-name\">{data.nodenm}\n                        {routeInfo!.routeInfo?.startnodenm === data.nodenm && <div className=\"start-end-label\">기점</div>}\n                        {routeInfo!.routeInfo?.endnodenm === data.nodenm && <div className=\"start-end-label\">종점</div>}\n                      </div>\n                      <div className=\"node-number\">{data.nodeno}</div>\n                    </div>\n                  </div>\n                )\n              }\n              )}\n            </div>\n          </div >\n        )\n      default:\n        return <></>\n    }\n  }\n\n  return (\n    <div className=\"information-container\">\n      {InfoComponent()}\n    </div>\n  )\n}\n\nexport default Information;","import { useState } from 'react';\nimport './App.scss';\nimport Map from './modules/map';\nimport Information from './modules/information';\nimport Header from './modules/Header';\n\ninterface BusStopInterface {\n  citycode: number;\n  gpslati: number;\n  gpslong: number;\n  nodeid: string;\n  nodenm: string;\n  // nodeno: number;\n}\nconst App = () => {\n  const [zoomLevel, setZoomLevel] = useState<number>(16); // initial zoom level provided for MapContainer\n  const [position, setPosition] = useState<[number, number]>([36.37412735693837, 127.36563659840922]);\n  const [station, setStation] = useState<any[]>([]);\n  const [selectBusStop, setSelectBusStop] = useState<BusStopInterface | null>(null);\n  const [selectID, setSelectID] = useState<string>(\"-1\");\n  // True 인 경우 주변 정류장 정보 API 호출 \n  const [mapMode, setMapMode] = useState<number>(0);\n  const [apiState, setApiState] = useState(true);\n\n  const settingBusStop = (_citycode: number, _gpslati: number, _gpslong: number, _nodeid: string, _nodenm: string) => {\n    let busStop: BusStopInterface = {\n      citycode: _citycode,\n      gpslati: _gpslati,\n      gpslong: _gpslong,\n      nodeid: _nodeid,\n      nodenm: _nodenm\n    };\n    setPosition([_gpslati, _gpslong]);\n    setSelectBusStop(busStop);\n    setSelectID(_nodeid);\n    setZoomLevel(18);\n    setApiState(false);\n    setMapMode(1);\n  };\n\n  return (\n    <div className=\"App\">\n      {/* <Header /> */}\n      <div className=\"contents\">\n        <Map station={station} setStation={setStation}\n          settingBusStop={settingBusStop}\n          position={position} setPosition={setPosition}\n          selectID={selectID} setSelectID={setSelectID}\n          zoomLevel={zoomLevel} setZoomLevel={setZoomLevel}\n          apiState={apiState} setApiState={setApiState} />\n        <Information station={station} settingBusStop={settingBusStop} setMapMode={setMapMode}\n          mapMode={mapMode} selectBusStop={selectBusStop} />\n        <button className=\"mode-change-button\"\n          onClick={() => {\n            if (mapMode !== 0)\n              setMapMode(mapMode - 1);\n          }}>\n          <i className=\"fas fa-times\"></i>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}