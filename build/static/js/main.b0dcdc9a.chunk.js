(this.webpackJsonpbus_information_site=this.webpackJsonpbus_information_site||[]).push([[0],{13:function(e,t,n){},29:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(11),a=n.n(o),s=(n(29),n(2)),r=(n(13),n(23)),i=n(52),l=n(53),d=n(56),j=n(54),u=n(55),b=(n(30),n(5)),m=n.n(b),p=n(9),O=n(22),h=n.n(O),f=function(e){return h.a.get("".concat("/api").concat(e)).then((function(e){return e})).catch((function(e){return e}))},v=n(0),g=p.station_key,x=function(e,t,n){return!(e.gpslati<t.lat||e.gpslati>n.lat||e.gpslong<t.lng||e.gpslong>n.lng)},S=function(e){var t=e.apiState,n=e.mapMode,c=e.setApiState,o=e.setStation,a=e.setZoomLevel,s=Object(r.a)(),i=function(e){e>13&&n&&(!function(e,t,n,c,o){var a=n.lat,s=n.lng,r="?serviceKey=".concat(g,"&gpsLati=").concat(a,"&gpsLong=").concat(s),i="/BusSttnInfoInqireService/getCrdntPrxmtSttnList".concat(r);t&&f(i).then((function(t){var n=t.data.response.header,a=t.data.response.body;if("00"===n.resultCode||0===n.resultCode){var s=a.items.item,r=[];null==s||void 0===s?r=[]:Array.isArray(s)?s.forEach((function(e){x(e,c,o)&&r.push(e)})):r=x(s,c,o)?[]:[s],e(r)}else console.log(a)})).catch((function(e){console.log(e)}))}(o,t,s.getCenter(),s.getBounds().getSouthWest(),s.getBounds().getNorthEast()),c(!0))},l=Object(r.b)({zoomstart:function(){c(!1)},zoomend:function(){a(l.getZoom())},moveend:function(){i(l.getZoom())},dragend:function(){c(!0)}});return Object(v.jsx)(v.Fragment,{})},y=function(e){var t=e.selectID,n=e.nodeid,c=e.nodenm;return Object(v.jsx)(i.a,{direction:"top",opacity:1,permanent:!0,interactive:!0,children:Object(v.jsxs)("div",{className:t===n?"select":"",children:[Object(v.jsx)("div",{children:Object(v.jsx)("img",{alt:"",className:"busIcon",src:""+t===n?"/marker.png":"/marker_white.png"})}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:c}),Object(v.jsx)("span",{children:n})]})]})})},N=function(e){var t=e.zoomLevel,n=e.mapState,o=e.mapMode,a=e.position,r=e.station,i=e.selectID,b=e.setZoomLevel,O=e.setStation,h=e.setMapState,f=e.setSelectID,g=e.openModal,x="https://api.vworld.kr/req/wmts/1.0.0/".concat(p.vworld_key,"/Base/{z}/{y}/{x}.png"),N=Object(c.useState)(!0),M=Object(s.a)(N,2),k=M[0],C=M[1],A=m.a.icon({iconUrl:"/marker.png",iconRetinaUrl:"/marker.png",iconAnchor:[15,15],popupAnchor:[0,0],iconSize:[30,30]});return Object(c.useEffect)((function(){console.log(t>=15)}),[t]),Object(v.jsxs)("div",{className:"map-container",children:[t<16?Object(v.jsx)("div",{className:"alert-box",children:Object(v.jsx)("h5",{children:"\uc870\uae08 \ub354 \uac00\uae4c\uc774 \uc774\ub3d9\ud574\uc8fc\uc138\uc694"})}):Object(v.jsx)("div",{}),Object(v.jsxs)(l.a,{center:a,zoom:t,scrollWheelZoom:!0,children:[Object(v.jsx)(d.a,{maxZoom:22,maxNativeZoom:18,attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:x}),Object(v.jsx)(S,{apiState:k,setApiState:C,mapMode:o,setZoomLevel:b,setStation:O}),Object(v.jsx)(j.a,{children:function(e){return n&&(e.setView(a,t),C(!1),h(!1)),Object(v.jsx)(v.Fragment,{})}}),o&&k&&r.length>0&&r.map((function(e,t){var n=e.citycode,c=e.gpslati,o=e.gpslong,a=e.nodeid,s=e.nodenm;return Object(v.jsx)(u.a,{position:[c.toString(),o.toString()],icon:A,eventHandlers:{click:function(){return function(e,t,n,c,o){f(o),g(e,t,n,o,c)}(n,c,o,s,a)}},children:Object(v.jsx)(y,{nodenm:s,nodeid:a,selectID:i})},t)}))]})]})},M=function(e){var t=e.mapMode,n=e.station,c=e.openModal;return Object(v.jsx)("div",{className:"information-container",children:t?Object(v.jsx)("div",{className:"information-table",children:n.length>0&&n.map((function(e,t){var n=e.citycode,o=e.gpslati,a=e.gpslong,s=e.nodenm,r=e.nodeid;return Object(v.jsx)("div",{onClick:function(){return c(n,o,a,r,s)},children:Object(v.jsxs)("div",{className:"info",children:[Object(v.jsx)("img",{src:"/marker.png",alt:""}),Object(v.jsxs)("h5",{children:[s,"(",r,")"]})]})},t)}))}):Object(v.jsx)("div",{children:"\uad6c\ud604\ud574\uc57c\ud560 \ub0b4\uc6a9"})})},k=function(){return Object(v.jsx)("header",{className:"App-header",children:Object(v.jsx)("div",{className:"logo",children:"Bus Information"})})},C=function(e){var t=e.array;return Object(v.jsx)(v.Fragment,{children:t.map((function(e,t){var n=e.arrtime,c=e.arrprevstationcnt,o=Math.floor(n/60);return Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:o<3?"\uc7a0\uc2dc \ud6c4 \ub3c4\ucc29":"".concat(o,"\ubd84 \ud6c4")}),Object(v.jsxs)("span",{children:[c," \uc815\uac70\uc7a5 \uc804"]})]},t)}))})},A=function(e){var t=e.isOpen,n=e.selectBusStop,o=(e.setMapMode,e.setIsModalOpen),a=Object(c.useState)([]),r=Object(s.a)(a,2),i=r[0],l=r[1];Object(c.useEffect)((function(){null!==n&&d()}),[n]);var d=function(){var e=p.station_key,t="?serviceKey=".concat(e,"&cityCode=").concat(n.citycode,"&nodeId=").concat(n.nodeid),c="/ArvlInfoInqireService/getSttnAcctoArvlPrearngeInfoList".concat(t);f(c).then((function(e){var t=e.data.response.header,n=e.data.response.body;if("00"===t.resultCode||0===t.resultCode){var c=n.items,a={};if(null!=c.item)if(0!==(c=c.item).length&&Array.isArray(c))c.forEach((function(e){var t=e.routeno,n=e.routeid,c=e.arrtime,o=e.arrprevstationcnt,s={};s.routeno=t,s.arrtime=c,s.arrprevstationcnt=o,void 0===a[n]&&(a[n]=[]),a[n].push(s)}));else if("object"===typeof c){var s={},r=c.routeid;s.routeno=c.routeno,s.arrtime=c.arrtime,s.arrprevstationcnt=c.arrprevstationcnt,void 0===a[r]&&(a[r]=[]),a[r].push(s)}else console.log(c);l(a),o(!0)}else console.log(n.header.resultCode)})).catch((function(e){console.log(e)}))};return Object(v.jsx)(v.Fragment,{children:t&&Object(v.jsx)("div",{className:"modal-container ",children:Object(v.jsxs)("div",{className:"modal",children:[Object(v.jsx)("button",{onClick:function(){return o(!1)},children:Object(v.jsx)("i",{className:"fas fa-times"})}),Object(v.jsxs)("div",{className:"info-content",children:[Object(v.jsxs)("h3",{className:"station-name",children:[Object(v.jsxs)("div",{className:"name",children:[n.nodenm,"(",n.nodeid,")"]}),Object(v.jsx)("div",{className:"refresh",onClick:function(){return d()},children:Object(v.jsx)("i",{className:"fas fa-sync-alt"})})]}),Object(v.jsx)("div",{className:"arrival-info-container",children:Object.keys(i).length>0?Object.keys(i).map((function(e,t){return Object(v.jsxs)("div",{className:"arrival-bus-info",onClick:function(){o(!1)},children:[Object(v.jsxs)("span",{className:"route-number",children:[i[e][0].routeno,"\ubc88"]}),Object(v.jsx)("span",{className:"arrival-bus-container",children:Object(v.jsx)(C,{array:i[e]})})]},t)})):Object(v.jsx)("div",{className:"arrival-bus-info",children:"\ub3c4\ucc29 \uc608\uc815 \uc815\ubcf4\uc5c6\uc74c"})})]})]})})})},I=function(){var e=Object(c.useState)(16),t=Object(s.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)([36.37412735693837,127.36563659840922]),r=Object(s.a)(a,2),i=r[0],l=r[1],d=Object(c.useState)([]),j=Object(s.a)(d,2),u=j[0],b=j[1],m=Object(c.useState)(!1),p=Object(s.a)(m,2),O=p[0],h=p[1],f=Object(c.useState)(null),g=Object(s.a)(f,2),x=g[0],S=g[1],y=Object(c.useState)("-1"),C=Object(s.a)(y,2),I=C[0],B=C[1],w=Object(c.useState)(!0),D=Object(s.a)(w,2),L=D[0],F=D[1],_=Object(c.useState)(!1),E=Object(s.a)(_,2),Z=E[0],z=E[1],J=function(e,t,n,c,a){var s={citycode:e,gpslati:t,gpslong:n,nodeid:c,nodenm:a};l([t,n]),S(s),B(c),o(18),z(!0)};return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(k,{}),Object(v.jsxs)("div",{className:"contents",children:[Object(v.jsx)(N,{station:u,setStation:b,openModal:J,position:i,selectID:I,setSelectID:B,zoomLevel:n,setZoomLevel:o,mapState:Z,setMapState:z,mapMode:L}),Object(v.jsx)(M,{station:u,openModal:J,mapMode:L}),Object(v.jsx)(A,{isOpen:O,setIsModalOpen:h,selectBusStop:x,setMapMode:F})]})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),o(e),a(e),s(e)}))};a.a.render(Object(v.jsx)(I,{}),document.getElementById("root")),B()},9:function(e){e.exports=JSON.parse('{"station_key":"N%2BQFA%2BwFDx9oMiWdwzjq248QR9Ka1w70Onnmpvdhc1%2FOmwDoLEWlXABOOrTr42J%2F03YjttaCrnwTA4hiJH1OiA%3D%3D","vworld_key":"B68996E4-BC0C-3C4A-B658-93658DD96E73"}')}},[[50,1,2]]]);
//# sourceMappingURL=main.b0dcdc9a.chunk.js.map